"use strict";var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports, "__esModule", { value: true });exports.initialEntityPrototype = exports.Prototype = exports.Reference = exports.Graph = void 0;var _entity = require("@dependency/entity");
var _TraversalClass = require("../Traversal.class.js");
var _DatabaseClass = require("../Database.class.js");
var _ContextClass = require("../Context.class.js");
var _ImplementationManagementClass = require("../ImplementationManagement.class.js");
var entityPrototype = _interopRequireWildcard(require("./prototype.js"));
var implementation = _interopRequireWildcard(require("@dependency/graphTraversal-implementation"));
var schemeReference = _interopRequireWildcard(require("../../dataModel/graphSchemeReference.js"));












const { class: Graph, reference: Reference, constructablePrototype: Prototype, entityPrototype: initialEntityPrototype } = new _entity.Entity.clientInterface({ description: 'Graph' });exports.initialEntityPrototype = initialEntityPrototype;exports.Prototype = Prototype;exports.Reference = Reference;exports.Graph = Graph;

Object.assign(Reference, {
  key: {
    constructor: Symbol('Graph:key.constructor') } });











Object.assign(initialEntityPrototype, entityPrototype);








Prototype[_entity.Constructable.reference.initialize.functionality].setter.call(Prototype, {
  [_entity.Entity.reference.key.concereteBehavior]({ targetInstance, concereteBehaviorList } = {}, previousResult) {} });









Prototype[_entity.Constructable.reference.constructor.functionality].setter.call(Prototype, {







  [Reference.key.constructor]({


    database,
    traversal,

    concreteBehaviorList = [],
    data,
    callerClass = this,
    mode = 'applicationInMemory' || 'databaseInMemory' })





  {
    database || (database = new _DatabaseClass.Database.clientInterface({
      implementationList: {
        boltCypher: implementation.database.boltCypherModelAdapterFunction({ schemeReference }) },

      defaultImplementation: 'boltCypher' }));

    traversal || (traversal = new _TraversalClass.Traversal.clientInterface({
      implementationList: {
        default: {
          traversalInterception: implementation.traversal.traversalInterception,
          aggregator: implementation.traversal.aggregator,
          processNode: implementation.traversal.processNode,
          portNode: implementation.traversal.portNode } },


      defaultImplementation: 'default' }));




    let instance = _entity.Constructable[_entity.Constructable.reference.constructor.functionality].switch.call(callerClass, { implementationKey: _entity.Entity.reference.key.concereteBehavior })({
      concreteBehaviorList: [...concreteBehaviorList, database, traversal],
      data });


    let concereteDatabase = instance[_entity.Entity.reference.getInstanceOf](_DatabaseClass.Database);
    instance.database = concereteDatabase[_DatabaseClass.Database.reference.key.getter]();
    let concreteTraversal = instance[_entity.Entity.reference.getInstanceOf](_TraversalClass.Traversal);
    instance.traversal = concreteTraversal[_ImplementationManagementClass.ImplementationManagement.reference.key.getter]();
    let context = instance[_entity.Entity.reference.getInstanceOf](_ContextClass.Context);
    instance.context = context ? context[_ContextClass.Context.reference.key.getter]() : {};





    return instance;
  } });









Graph.clientInterface = Prototype[_entity.Constructable.reference.clientInterface.functionality].switch.call(Graph, {
  implementationKey: _entity.Entity.reference.key.instanceDelegatingToEntityInstancePrototype })(
{
  constructorImplementation: Reference.key.constructor,
  clientInterfaceInterceptCallback: false });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NvdXJjZS9jb25zdHJ1Y3RhYmxlL0dyYXBoL0dyYXBoLmNsYXNzLmpzIl0sIm5hbWVzIjpbImNsYXNzIiwiR3JhcGgiLCJyZWZlcmVuY2UiLCJSZWZlcmVuY2UiLCJjb25zdHJ1Y3RhYmxlUHJvdG90eXBlIiwiUHJvdG90eXBlIiwiZW50aXR5UHJvdG90eXBlIiwiaW5pdGlhbEVudGl0eVByb3RvdHlwZSIsIkVudGl0eSIsImNsaWVudEludGVyZmFjZSIsImRlc2NyaXB0aW9uIiwiT2JqZWN0IiwiYXNzaWduIiwia2V5IiwiY29uc3RydWN0b3IiLCJTeW1ib2wiLCJDb25zdHJ1Y3RhYmxlIiwiaW5pdGlhbGl6ZSIsImZ1bmN0aW9uYWxpdHkiLCJzZXR0ZXIiLCJjb25jZXJldGVCZWhhdmlvciIsInRhcmdldEluc3RhbmNlIiwiY29uY2VyZXRlQmVoYXZpb3JMaXN0IiwicHJldmlvdXNSZXN1bHQiLCJkYXRhYmFzZSIsInRyYXZlcnNhbCIsImNvbmNyZXRlQmVoYXZpb3JMaXN0IiwiZGF0YSIsImNhbGxlckNsYXNzIiwibW9kZSIsIkRhdGFiYXNlIiwiaW1wbGVtZW50YXRpb25MaXN0IiwiYm9sdEN5cGhlciIsImltcGxlbWVudGF0aW9uIiwiYm9sdEN5cGhlck1vZGVsQWRhcHRlckZ1bmN0aW9uIiwic2NoZW1lUmVmZXJlbmNlIiwiZGVmYXVsdEltcGxlbWVudGF0aW9uIiwiVHJhdmVyc2FsIiwiZGVmYXVsdCIsInRyYXZlcnNhbEludGVyY2VwdGlvbiIsImFnZ3JlZ2F0b3IiLCJwcm9jZXNzTm9kZSIsInBvcnROb2RlIiwiaW5zdGFuY2UiLCJzd2l0Y2giLCJpbXBsZW1lbnRhdGlvbktleSIsImNvbmNlcmV0ZURhdGFiYXNlIiwiZ2V0SW5zdGFuY2VPZiIsImdldHRlciIsImNvbmNyZXRlVHJhdmVyc2FsIiwiSW1wbGVtZW50YXRpb25NYW5hZ2VtZW50IiwiY29udGV4dCIsIkNvbnRleHQiLCJpbnN0YW5jZURlbGVnYXRpbmdUb0VudGl0eUluc3RhbmNlUHJvdG90eXBlIiwiY29uc3RydWN0b3JJbXBsZW1lbnRhdGlvbiIsImNsaWVudEludGVyZmFjZUludGVyY2VwdENhbGxiYWNrIl0sIm1hcHBpbmdzIjoia1FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQWFPLE1BQU0sRUFBRUEsS0FBSyxFQUFFQyxLQUFULEVBQWdCQyxTQUFTLEVBQUVDLFNBQTNCLEVBQXNDQyxzQkFBc0IsRUFBRUMsU0FBOUQsRUFBeUVDLGVBQWUsRUFBRUMsc0JBQTFGLEtBQXFILElBQUlDLGVBQU9DLGVBQVgsQ0FBMkIsRUFBRUMsV0FBVyxFQUFFLE9BQWYsRUFBM0IsQ0FBM0gsQzs7QUFFUEMsTUFBTSxDQUFDQyxNQUFQLENBQWNULFNBQWQsRUFBeUI7QUFDdkJVLEVBQUFBLEdBQUcsRUFBRTtBQUNIQyxJQUFBQSxXQUFXLEVBQUVDLE1BQU0sQ0FBQyx1QkFBRCxDQURoQixFQURrQixFQUF6Qjs7Ozs7Ozs7Ozs7O0FBY0FKLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjTCxzQkFBZCxFQUFzQ0QsZUFBdEM7Ozs7Ozs7OztBQVNXRCxTQUFTLENBQUNXLHNCQUFjZCxTQUFkLENBQXdCZSxVQUF4QixDQUFtQ0MsYUFBcEMsQ0FBVCxDQUE0REMsTUFBdkUsTUFBQWQsU0FBUyxFQUFxRTtBQUM1RSxHQUFDRyxlQUFPTixTQUFQLENBQWlCVyxHQUFqQixDQUFxQk8saUJBQXRCLEVBQXlDLEVBQUVDLGNBQUYsRUFBa0JDLHFCQUFsQixLQUE0QyxFQUFyRixFQUF5RkMsY0FBekYsRUFBeUcsQ0FBRSxDQUQvQixFQUFyRSxDQUFUOzs7Ozs7Ozs7O0FBV1dsQixTQUFTLENBQUNXLHNCQUFjZCxTQUFkLENBQXdCWSxXQUF4QixDQUFvQ0ksYUFBckMsQ0FBVCxDQUE2REMsTUFBeEUsTUFBQWQsU0FBUyxFQUFzRTs7Ozs7Ozs7QUFRN0UsR0FBQ0YsU0FBUyxDQUFDVSxHQUFWLENBQWNDLFdBQWYsRUFBNEI7OztBQUcxQlUsSUFBQUEs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RzRDLEVBQUFBLGlCQUFpQixFQUFFckMsZUFBT04sU0FBUCxDQUFpQlcsR0FBakIsQ0FBcUJ3QywyQ0FENkQsRUFBMUUsQ0FBTDtBQUVyQjtBQUNEQyxFQUFBQSx5QkFBeUIsRUFBRW5ELFNBQVMsQ0FBQ1UsR0FBVixDQUFjQyxXQUR4QztBQUVEeUMsRUFBQUEsZ0NBQWdDLEVBQUUsS0FGakMsRUFGcUIsQ0FBeEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbnRpdHksIENvbnN0cnVjdGFibGUsIHN5bWJvbCB9IGZyb20gJ0BkZXBlbmRlbmN5L2VudGl0eSdcbmltcG9ydCB7IFRyYXZlcnNhbCB9IGZyb20gJy4uL1RyYXZlcnNhbC5jbGFzcy5qcydcbmltcG9ydCB7IERhdGFiYXNlIH0gZnJvbSAnLi4vRGF0YWJhc2UuY2xhc3MuanMnXG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnLi4vQ29udGV4dC5jbGFzcy5qcydcbmltcG9ydCB7IEltcGxlbWVudGF0aW9uTWFuYWdlbWVudCB9IGZyb20gJy4uL0ltcGxlbWVudGF0aW9uTWFuYWdlbWVudC5jbGFzcy5qcydcbmltcG9ydCAqIGFzIGVudGl0eVByb3RvdHlwZSBmcm9tICcuL3Byb3RvdHlwZS5qcydcbmltcG9ydCAqIGFzIGltcGxlbWVudGF0aW9uIGZyb20gJ0BkZXBlbmRlbmN5L2dyYXBoVHJhdmVyc2FsLWltcGxlbWVudGF0aW9uJ1xuaW1wb3J0ICogYXMgc2NoZW1lUmVmZXJlbmNlIGZyb20gJy4uLy4uL2RhdGFNb2RlbC9ncmFwaFNjaGVtZVJlZmVyZW5jZS5qcydcbi8vIGltcG9ydCB7IE5vZGUgfSBmcm9tICcuL05vZGUuY2xhc3MuanMnXG4vLyBpbXBvcnQgeyBDb25uZWN0aW9uIH0gZnJvbSAnLi4vQ29ubmVjdGlvbi5jbGFzcy5qcydcbi8vIGltcG9ydCB7IENhY2hlIH0gZnJvbSAnLi4vQ2FjaGUuY2xhc3MuanMnXG5cbi8qKiBDb25jZXB0dWFsIEdyYXBoXG4gKiBHcmFwaCBDbGFzcyBob2xkcyBhbmQgbWFuYWdlcyBncmFwaCBlbGVtZW50cyBhbmQgdHJhdmVyc2FsIGFsZ29yaXRobSBpbXBsZW1lbnRhdGlvbnM6XG4gKiAgLSBDYWNoZTogb24tZGVtYW5kIHJldHJpdmVkIG5vZGVzIGZyb20gREIgYXJlIGNhY2hlZC5cbiAqICAtIERhdGFiYXNlOiBnZXQgZ3JhcGggZGF0YSBhbmQgbG9hZCBpdCBpbnRvIG1lbW9yeS5cbiAqICAtIFRyYXZlcnNhbDogaW1wbGVtZW50YXRpb24gZm9yIHRoZSB0cmF2ZXJzYWwgYWxnb3JpdGhtLlxuICogIC0gQ29udGV4dDogc2hhcmVkIGRhdGEgYWNjZXNzaWJsZSBiZXR3ZWVuIHRyYXZlcnNhbHMuXG4gKiBUaGUgR3JhcGggaW5zdGFuY2Ugc2hvdWxkIGhhdmUgYW4gYWJpbGl0eSB0byBzZXQvY2hhbmdlIHN0cmF0ZWdpZXMvaW1wbGVtZW50YXRpb25zIG9uIHJ1bnRpbWUgYW5kIGFiaWxpdHkgdG8gdXNlIG11bHRpcGxlIHJlZ2lzdGVyZWQgaW1wbGVtZW50YXRpb25zLlxuICovXG5leHBvcnQgY29uc3QgeyBjbGFzczogR3JhcGgsIHJlZmVyZW5jZTogUmVmZXJlbmNlLCBjb25zdHJ1Y3RhYmxlUHJvdG90eXBlOiBQcm90b3R5cGUsIGVudGl0eVByb3RvdHlwZTogaW5pdGlhbEVudGl0eVByb3RvdHlwZSB9ID0gbmV3IEVudGl0eS5jbGllbnRJbnRlcmZhY2UoeyBkZXNjcmlwdGlvbjogJ0dyYXBoJyB9KVxuXG5PYmplY3QuYXNzaWduKFJlZmVyZW5jZSwge1xuICBrZXk6IHtcbiAgICBjb25zdHJ1Y3RvcjogU3ltYm9sKCdHcmFwaDprZXkuY29uc3RydWN0b3InKSxcbiAgfSxcbn0pXG5cbi8qXG4gICAgICAgICAgICAgICAgICAgXyAgICAgICAgXyAgICAgICAgICAgICAgICAgICAgX19fXyAgICAgICBfICAgICAgICAgICAgICAgICAgXyAgIF8gICAgICAgICAgICAgXG4gICBfIF9fICBfIF9fIF9fXyB8IHxfIF9fXyB8IHxfIF8gICBfIF8gX18gICBfX198ICBfIFxcICBfX198IHwgX19fICBfXyBfICBfXyBffCB8XyhfKSBfX18gIF8gX18gIFxuICB8ICdfIFxcfCAnX18vIF8gXFx8IF9fLyBfIFxcfCBfX3wgfCB8IHwgJ18gXFwgLyBfIFxcIHwgfCB8LyBfIFxcIHwvIF8gXFwvIF9gIHwvIF9gIHwgX198IHwvIF8gXFx8ICdfIFxcIFxuICB8IHxfKSB8IHwgfCAoXykgfCB8fCAoXykgfCB8X3wgfF98IHwgfF8pIHwgIF9fLyB8X3wgfCAgX18vIHwgIF9fLyAoX3wgfCAoX3wgfCB8X3wgfCAoXykgfCB8IHwgfFxuICB8IC5fXy98X3wgIFxcX19fLyBcXF9fXFxfX18vIFxcX198XFxfXywgfCAuX18vIFxcX19ffF9fX18vIFxcX19ffF98XFxfX198XFxfXywgfFxcX18sX3xcXF9ffF98XFxfX18vfF98IHxffFxuICB8X3wgICAgICAgICAgICAgICAgICAgICAgICAgICB8X19fL3xffCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxfX18vICAgICAgICAgICAgICAgICAgICAgICAgIFxuKi9cbk9iamVjdC5hc3NpZ24oaW5pdGlhbEVudGl0eVByb3RvdHlwZSwgZW50aXR5UHJvdG90eXBlKVxuXG4vKlxuICAgXyAgICAgICBfIF8gICBfICAgICAgIF8gXyAgICAgICAgIFxuICAoXylfIF9fIChfKSB8XyhfKSBfXyBffCAoXylfX19fX19fIFxuICB8IHwgJ18gXFx8IHwgX198IHwvIF9gIHwgfCB8XyAgLyBfIFxcXG4gIHwgfCB8IHwgfCB8IHxffCB8IChffCB8IHwgfC8gLyAgX18vXG4gIHxffF98IHxffF98XFxfX3xffFxcX18sX3xffF8vX19fXFxfX198XG4qL1xuUHJvdG90eXBlOjpQcm90b3R5cGVbQ29uc3RydWN0YWJsZS5yZWZlcmVuY2UuaW5pdGlhbGl6ZS5mdW5jdGlvbmFsaXR5XS5zZXR0ZXIoe1xuICBbRW50aXR5LnJlZmVyZW5jZS5rZXkuY29uY2VyZXRlQmVoYXZpb3JdKHsgdGFyZ2V0SW5zdGFuY2UsIGNvbmNlcmV0ZUJlaGF2aW9yTGlzdCB9ID0ge30sIHByZXZpb3VzUmVzdWx0KSB7fSxcbn0pXG5cbi8qXG4gICAgICAgICAgICAgICAgICAgICAgIF8gICAgICAgICAgICAgICAgICAgXyAgICAgICAgICAgICBcbiAgICBfX18gX19fICBfIF9fICBfX198IHxfIF8gX18gXyAgIF8gIF9fX3wgfF8gX19fICBfIF9fIFxuICAgLyBfXy8gXyBcXHwgJ18gXFwvIF9ffCBfX3wgJ19ffCB8IHwgfC8gX198IF9fLyBfIFxcfCAnX198XG4gIHwgKF98IChfKSB8IHwgfCBcXF9fIFxcIHxffCB8ICB8IHxffCB8IChfX3wgfHwgKF8pIHwgfCAgIFxuICAgXFxfX19cXF9fXy98X3wgfF98X19fL1xcX198X3wgICBcXF9fLF98XFxfX198XFxfX1xcX19fL3xffCAgIFxuKi9cblByb3RvdHlwZTo6UHJvdG90eXBlW0NvbnN0cnVjdGFibGUucmVmZXJlbmNlLmNvbnN0cnVjdG9yLmZ1bmN0aW9uYWxpdHldLnNldHRlcih7XG4gIC8qKlxuICAgKiBHcmFwaCB3aWxsIGNvbnRhaW4gdGhlIHByb3RvdHlwZSBjaGFpbiB0byBpbnN0YWxsIG9uIHRoZSBpbnN0YW5jZXMgKHByZXZpb3VzbHkgJ2NsYXNzZXMgaGllcmFyY2h5IGNvbm5lY3Rpb25zYClcbiAgICogMS4gY29uZmlndXJlZENvbnN0cnVjdGFibGUxID0gR3JhcGgoPHBsdWdpbnM+KVxuICAgKiAyLiBjb25maWd1cmVkQ29uc3RydWN0YWJsZTIgPSBjb25maWd1cmVkQ29uc3RydWN0YWJsZTEoPGNvbnRleHQ+KVxuICAgKiAzLiBuZXcgY29uZmlndXJlZENvbnN0cnVjdGFibGUyKDxpbnN0YW5jZSBkYXRhPikgLy8gY3JlYXRlcyBpbnN0YW5jZVxuICAgKiA0LiB0cmF2ZXJzZSBncmFwaDogZS5nLiBpbnN0YW5jZS50cmF2ZXJzZUdyYXBoKClcbiAgICovXG4gIFtSZWZlcmVuY2Uua2V5LmNvbnN0cnVjdG9yXSh7XG4gICAgLy8gQ29uY2VyZXRlIGJlaGF2aW9ycyAvIGltcGxlbWVudGFpb25zXG4gICAgLy8gY2FjaGUsXG4gICAgZGF0YWJhc2UsIC8vIGRhdGFiYXNlIGNvbmNyZXRlIGJlaGF2aW9yXG4gICAgdHJhdmVyc2FsLCAvLyB0cmF2ZXJzYWwgY29uY3JldGUgYmVoYXZpb3JcbiAgICAvLyBhZGRpdGlvbmFsIGJlaGF2aW9yc1xuICAgIGNvbmNyZXRlQmVoYXZpb3JMaXN0ID0gW10sXG4gICAgZGF0YSwgLy8gZGF0YSB0byBiZSBtZXJnZWQgaW50byB0aGUgaW5zdGFuY2VcbiAgICBjYWxsZXJDbGFzcyA9IHRoaXMsXG4gICAgbW9kZSA9ICdhcHBsaWNhdGlvbkluTWVtb3J5JyB8fCAnZGF0YWJhc2VJbk1lbW9yeScsXG4gIH06IHtcbiAgICBjYWNoZTogQ2FjaGUsXG4gICAgZGF0YWJhc2U6IERhdGFiYXNlLFxuICAgIHRyYXZlcnNhbDogVHJhdmVyc2FsLFxuICAgIGNvbmNlcmV0ZUJlaGF2aW9yOiBMaXN0LFxuICB9KSB7XG4gICAgZGF0YWJhc2UgfHw9IG5ldyBEYXRhYmFzZS5jbGllbnRJbnRlcmZhY2Uoe1xuICAgICAgaW1wbGVtZW50YXRpb25MaXN0OiB7XG4gICAgICAgIGJvbHRDeXBoZXI6IGltcGxlbWVudGF0aW9uLmRhdGFiYXNlLmJvbHRDeXBoZXJNb2RlbEFkYXB0ZXJGdW5jdGlvbih7IHNjaGVtZVJlZmVyZW5jZSB9KSxcbiAgICAgIH0sXG4gICAgICBkZWZhdWx0SW1wbGVtZW50YXRpb246ICdib2x0Q3lwaGVyJyxcbiAgICB9KVxuICAgIHRyYXZlcnNhbCB8fD0gbmV3IFRyYXZlcnNhbC5jbGllbnRJbnRlcmZhY2Uoe1xuICAgICAgaW1wbGVtZW50YXRpb25MaXN0OiB7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICB0cmF2ZXJzYWxJbnRlcmNlcHRpb246IGltcGxlbWVudGF0aW9uLnRyYXZlcnNhbC50cmF2ZXJzYWxJbnRlcmNlcHRpb24sIC8vIFN0YWdlXG4gICAgICAgICAgYWdncmVnYXRvcjogaW1wbGVtZW50YXRpb24udHJhdmVyc2FsLmFnZ3JlZ2F0b3IsXG4gICAgICAgICAgcHJvY2Vzc05vZGU6IGltcGxlbWVudGF0aW9uLnRyYXZlcnNhbC5wcm9jZXNzTm9kZSwgLy8gUHJvY2Vzc1xuICAgICAgICAgIHBvcnROb2RlOiBpbXBsZW1lbnRhdGlvbi50cmF2ZXJzYWwucG9ydE5vZGUsIC8vIFBvcnRcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBkZWZhdWx0SW1wbGVtZW50YXRpb246ICdkZWZhdWx0JyxcbiAgICB9KVxuXG4gICAgLy8gY2FjaGUgfHw9IG5ldyBDYWNoZS5jbGllbnRJbnRlcmZhY2UoeyBncm91cEtleUFycmF5OiBbJ25vZGUnLCAnY29ubmVjdGlvbiddIH0pXG5cbiAgICBsZXQgaW5zdGFuY2UgPSBjYWxsZXJDbGFzczo6Q29uc3RydWN0YWJsZVtDb25zdHJ1Y3RhYmxlLnJlZmVyZW5jZS5jb25zdHJ1Y3Rvci5mdW5jdGlvbmFsaXR5XS5zd2l0Y2goeyBpbXBsZW1lbnRhdGlvbktleTogRW50aXR5LnJlZmVyZW5jZS5rZXkuY29uY2VyZXRlQmVoYXZpb3IgfSkoe1xuICAgICAgY29uY3JldGVCZWhhdmlvckxpc3Q6IFsuLi5jb25jcmV0ZUJlaGF2aW9yTGlzdCwgLypjYWNoZSwqLyBkYXRhYmFzZSwgdHJhdmVyc2FsXSxcbiAgICAgIGRhdGEsXG4gICAgfSlcbiAgICAvLyBleHBvc2UgZnVuY3Rpb25hbGl0eSBmb3IgZGlyZWN0IHNpbXBsaWZpZWQgYWNjZXNzOlxuICAgIGxldCBjb25jZXJldGVEYXRhYmFzZSA9IGluc3RhbmNlW0VudGl0eS5yZWZlcmVuY2UuZ2V0SW5zdGFuY2VPZl0oRGF0YWJhc2UpXG4gICAgaW5zdGFuY2UuZGF0YWJhc2UgPSBjb25jZXJldGVEYXRhYmFzZVtEYXRhYmFzZS5yZWZlcmVuY2Uua2V5LmdldHRlcl0oKVxuICAgIGxldCBjb25jcmV0ZVRyYXZlcnNhbCA9IGluc3RhbmNlW0VudGl0eS5yZWZlcmVuY2UuZ2V0SW5zdGFuY2VPZl0oVHJhdmVyc2FsKVxuICAgIGluc3RhbmNlLnRyYXZlcnNhbCA9IGNvbmNyZXRlVHJhdmVyc2FsW0ltcGxlbWVudGF0aW9uTWFuYWdlbWVudC5yZWZlcmVuY2Uua2V5LmdldHRlcl0oKVxuICAgIGxldCBjb250ZXh0ID0gaW5zdGFuY2VbRW50aXR5LnJlZmVyZW5jZS5nZXRJbnN0YW5jZU9mXShDb250ZXh0KVxuICAgIGluc3RhbmNlLmNvbnRleHQgPSBjb250ZXh0ID8gY29udGV4dFtDb250ZXh0LnJlZmVyZW5jZS5rZXkuZ2V0dGVyXSgpIDoge31cblxuICAgIC8vIGNvbmZpZ3VyZSBHcmFwaCBlbGVtZW50IGNsYXNzZXNcbiAgICAvLyBpbnN0YW5jZS5jb25maWd1cmVkTm9kZSA9IE5vZGUuY2xpZW50SW50ZXJmYWNlKHsgcGFyYW1ldGVyOiBbeyBjb25jcmV0ZUJlaGF2aW9yTGlzdDogW10gfV0gfSlcbiAgICAvLyBpbnN0YW5jZS5jb25maWd1cmVkQ29ubmVjdGlvbiA9IENvbm5lY3Rpb24uY2xpZW50SW50ZXJmYWNlKHsgcGFyYW1ldGVyOiBbeyBjb25jZXJldGVCZWhhdmlvcjogW10gfV0gfSlcblxuICAgIHJldHVybiBpbnN0YW5jZVxuICB9LFxufSlcblxuLypcbiAgICAgICAgXyBfICAgICAgICAgICAgXyAgIF9fXyAgICAgICBfICAgICAgICAgICAgIF9fICAgICAgICAgICAgICAgIFxuICAgIF9fX3wgKF8pIF9fXyBfIF9fIHwgfF98XyBffF8gX18gfCB8XyBfX18gXyBfXyAvIF98IF9fIF8gIF9fXyBfX18gXG4gICAvIF9ffCB8IHwvIF8gXFwgJ18gXFx8IF9ffHwgfHwgJ18gXFx8IF9fLyBfIFxcICdfX3wgfF8gLyBfYCB8LyBfXy8gXyBcXFxuICB8IChfX3wgfCB8ICBfXy8gfCB8IHwgfF8gfCB8fCB8IHwgfCB8fCAgX18vIHwgIHwgIF98IChffCB8IChffCAgX18vXG4gICBcXF9fX3xffF98XFxfX198X3wgfF98XFxfX3xfX198X3wgfF98XFxfX1xcX19ffF98ICB8X3wgIFxcX18sX3xcXF9fX1xcX19ffFxuKi9cbkdyYXBoLmNsaWVudEludGVyZmFjZSA9IEdyYXBoOjpQcm90b3R5cGVbQ29uc3RydWN0YWJsZS5yZWZlcmVuY2UuY2xpZW50SW50ZXJmYWNlLmZ1bmN0aW9uYWxpdHldLnN3aXRjaCh7XG4gIGltcGxlbWVudGF0aW9uS2V5OiBFbnRpdHkucmVmZXJlbmNlLmtleS5pbnN0YW5jZURlbGVnYXRpbmdUb0VudGl0eUluc3RhbmNlUHJvdG90eXBlLFxufSkoe1xuICBjb25zdHJ1Y3RvckltcGxlbWVudGF0aW9uOiBSZWZlcmVuY2Uua2V5LmNvbnN0cnVjdG9yLFxuICBjbGllbnRJbnRlcmZhY2VJbnRlcmNlcHRDYWxsYmFjazogZmFsc2UsXG59KVxuIl19